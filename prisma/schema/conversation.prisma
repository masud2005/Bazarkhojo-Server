model Conversation {
  id            Int           @id @default(autoincrement())
  user1Id        Int
  user2Id        Int
  lastMessageAt DateTime?
  createdAt     DateTime      @default(now())
  updatedAt     DateTime      @updatedAt

  user1         User          @relation("User1Conversations", fields: [user1Id], references: [id])
  user2         User          @relation("User2Conversations", fields: [user2Id], references: [id])
  messages      Message[]

  @@unique([user1Id, user2Id])
}

model Message {
  id             Int          @id @default(autoincrement())
  conversationId Int
  senderId       Int
  message        String
  createdAt      DateTime     @default(now())

  conversation   Conversation @relation(fields: [conversationId], references: [id])
  sender         User         @relation(fields: [senderId], references: [id])
}