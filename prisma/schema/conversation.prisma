model Conversation {
  id            String        @id @default(uuid())
  user1Id        String
  user2Id        String
  lastMessageAt DateTime?
  createdAt     DateTime      @default(now())
  updatedAt     DateTime      @updatedAt

  user1         User          @relation("User1Conversations", fields: [user1Id], references: [id])
  user2         User          @relation("User2Conversations", fields: [user2Id], references: [id])
  messages      Message[]

  @@unique([user1Id, user2Id])
}

model Message {
  id             String       @id @default(uuid())
  conversationId String
  senderId       String
  message        String
  createdAt      DateTime     @default(now())

  conversation   Conversation @relation(fields: [conversationId], references: [id])
  sender         User         @relation(fields: [senderId], references: [id])
}