model Conversation {
  id            Int           @id @default(autoincrement())
  participant1Id Int
  participant2Id Int
  lastMessageAt DateTime?
  createdAt     DateTime      @default(now())
  updatedAt     DateTime      @updatedAt

  participant1  User          @relation("Participant1", fields: [participant1Id], references: [id])
  participant2  User          @relation("Participant2", fields: [participant2Id], references: [id])
  messages      ChatMessage[]

  @@unique([participant1Id, participant2Id])
}

model ChatMessage {
  id             Int          @id @default(autoincrement())
  conversationId Int
  senderId       Int
  message        String
  isRead         Boolean      @default(false)
  createdAt      DateTime     @default(now())

  conversation   Conversation @relation(fields: [conversationId], references: [id])
  sender         User         @relation(fields: [senderId], references: [id])
}