model User {
  id                Int       @id @default(autoincrement())
  email             String    @unique @db.VarChar
  password          String    @db.VarChar
  firstName         String?
  lastName          String?
  phone             String?
  role              UserRole  @default(USER)
  isActive          Boolean   @default(true)
  isVerified        Boolean   @default(false)
  twoFactorEnabled  Boolean   @default(false)
  twoFactorSecret   String?
  lastLogin         DateTime?
  referralCode      String?   @unique
  referredBy        Int?      
  createdAt         DateTime  @default(now())
  updatedAt         DateTime  @updatedAt

  referredByUser    User?     @relation("Referral", fields: [referredBy], references: [id])
  referredUsers     User[]    @relation("Referral")
  seller            Seller?
  rider             Rider?
  wallet            Wallet?
  addresses         Address[]
  orders            Order[]
  returns           Return[]
  follows           Follow[]
  wishlists         Wishlist[]
  cart              Cart?
  reviews           Review[]
  couponUsages      CouponUsage[]
  conversationsAsP1 Conversation[] @relation("Participant1")
  conversationsAsP2 Conversation[] @relation("Participant2")
  chatMessages      ChatMessage[]
  notifications     Notification[]
  notificationPref  NotificationPreference?
  supportTickets    SupportTicket[]
  ticketReplies     TicketReply[]
  blogs             Blog[]
  flashSales        FlashSale[]
  logs              Log[]
}

enum UserRole {
  USER
  SELLER
  ADMIN
  RIDER
}