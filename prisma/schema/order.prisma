model Order {
  id              String         @id @default(uuid())
  userId          String
  orderNumber     String         @unique
  totalAmount     Decimal        @db.Decimal(12, 2)
  status          String         @default("PENDING")
  discountAmount  Decimal        @default(0) @db.Decimal(12, 2)
  taxAmount       Decimal        @default(0) @db.Decimal(12, 2)
  shippingAmount  Decimal        @default(0) @db.Decimal(12, 2)
  paymentMethod   PaymentMethod?
  paymentStatus   PaymentStatus  @default(PENDING)
  orderStatus     OrderStatus    @default(PENDING)
  shippingAddress Json?
  trackingNumber  String?
  riderId         String?
  couponId        String?
  notes           String?
  createdAt       DateTime       @default(now())
  updatedAt       DateTime       @updatedAt

  user               User                 @relation(fields: [userId], references: [id])
  rider              Rider?               @relation(fields: [riderId], references: [id])
  coupon             Coupon?              @relation(fields: [couponId], references: [id])
  sellerOrders       SellerOrder[]
  walletTransactions WalletTransaction[]
  payments           Payment[]
  returns            Return[]
  couponUsages       CouponUsage[]
  statusHistory      OrderStatusHistory[]

  @@index([userId])
  @@index([riderId])
  @@index([couponId])
  @@index([orderStatus])
  @@index([createdAt])
}

enum OrderStatus {
  PENDING
  PROCESSING
  SHIPPED
  DELIVERED
  CANCELLED
  RETURN_REQUESTED
  RETURNED
}

enum PaymentMethod {
  BKASH
  NAGAD
  SSLCOMMERZ
  CARD
  COD
}
